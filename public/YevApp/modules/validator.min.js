angular.module("validator",[]),angular.module("validator").directive("validator",function(){return{restrict:"A",link:function(e,a){function t(e){for(var a=0;a<e.length;a++)a in e&&n(e[a])}function n(a){"validate-on"in a.attributes&&"blur"===a.attributes["validate-on"].value&&angular.element(a).on("blur",function(){l(a),o(a)}),e.$watch(function(){return a.value+v.submitted+i(a)+r(v[a.name])},function(){"validate-on"in a.attributes&&"dirty"===a.attributes["validate-on"].value?(l(a),o(a)):(v.submitted||v[a.name]&&v[a.name].$valid)&&(l(a),o(a))})}function r(e){return e&&"$dirty"in e?e.$dirty:void 0}function i(a){if("validator"in a.attributes){var t=e.$eval(a.attributes.validator.value);return v[a.name].$setValidity("validator",t),t}}function l(a){var t=function(){return"<i class='fa fa-times'></i> Required"},n=function(){return"<i class='fa fa-times'></i> Invalid"};if(a.name in v){var r=v[a.name];if(r.$dirty||e[a.form.name].submitted){var i=s(a);i&&i.remove(),r.$error.required?angular.element(a).after("required-message"in a.attributes?u(a.attributes["required-message"].value):u(t)):r.$valid||angular.element(a).after("invalid-message"in a.attributes?u(a.attributes["invalid-message"].value):u(n))}}}function u(a){return"<label class='control-label has-error validationMessage'>"+e.$eval(a)+"</label>"}function s(e){for(var a=angular.element(e).parent().children(),t=0;t<a.length;t++)if(angular.element(a[t]).hasClass("validationMessage"))return angular.element(a[t]);return!1}function o(a){if(a.name in v){var t=v[a.name];(t.$dirty||e[a.form.name].submitted)&&(t.$valid?(angular.element(a.parentNode).removeClass("has-error"),angular.element(a).removeClass("has-error")):t.$invalid&&(angular.element(a.parentNode).addClass("has-error"),angular.element(a).addClass("has-error")))}}var d=angular.element(a)[0],v=e[d.name];v.submitted=!1,a.on("submit",function(a){a.preventDefault(),e.$apply(function(){v.submitted=!0}),v.$valid&&e.$apply(function(){e.$eval(d.attributes["validator-submit"].value)})}),t(d)}}});